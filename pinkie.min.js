!function(n){var t=function(n){var c=[],i=function(n){do var u=c.shift();while(u&&"then"!=u.type);if(u){var h=u.func(n);h instanceof t?h.then(function(n){i(n)})["catch"](function(n){f(n)}):i(h)}},f=function(n){do var u=c.shift();while(u&&"catch"!=u.type);if(u){var h=u.func(n);h instanceof t?h.then(function(n){i(n)})["catch"](function(n){f(n)}):i(h)}};return this["catch"]=function(n){return c.push({type:"catch",func:n}),this},this.then=function(n){return c.push({type:"then",func:n}),this},setTimeout(function(){n(i,f)},0),this};t.race=function(n){var c=new t(function(t,c){for(var i=!1,f=0;f<n.length;f++)n[f].then(function(n){i||(i=!0,t(n))})["catch"](function(n){i||(i=!0,c(n))})});return c},t.all=function(n){var c=0,i=[],f=!1,u=new t(function(t,u){n.forEach(function(h,e){h.then(function(u){f||(c++,i[e]=u,c===n.length&&t(i))})["catch"](function(n){f||(f=!0,u(n))})})});return u},n.Pinkie=t}(this);
